services:
  tiqtech-site:
    image: tiqtech-site:latest
    ports:
      - "3333:80"
    networks:
      - my-network
    deploy:
      replicas: 1
      restart_policy:
        condition: any
        delay: 5s
      labels:
        # Habilita Traefik
        - "traefik.enable=true"

        # ===== ROTEAMENTO DO DOM√çNIO =====
        - "traefik.http.routers.tiqtech-site.rule=Host(`lead.tiqtech.com.br`)"
        - "traefik.http.routers.tiqtech-site.entrypoints=websecure"
        - "traefik.http.routers.tiqtech-site.tls.certresolver=letsencryptresolver"

        # Porta interna do container (Nginx serve build na porta 80)
        - "traefik.http.services.tiqtech-site.loadbalancer.server.port=80"

networks:
  my-network:
    external: true